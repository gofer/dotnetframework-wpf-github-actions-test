name: UnitTest

on:
    push:
        branches: [ "feature-add-github-actions" ]

    pull_request:
        branches: [ "feature-add-github-actions" ]

    workflow_dispatch:

jobs:
    build:
        runs-on: windows-latest

        steps:
            - name: checkout
              uses: actions/checkout@v4

            - name: setup msbuild
              uses: microsoft/setup-msbuild@v2

            - name: setup nuget
              uses: NuGet/setup-nuget@v2.0.0

            - name: restore nuget packages
              run: nuget restore dotnetframework-wpf-github-actions-test.sln

            - name: build solution
              run: msbuild dotnetframework-wpf-github-actions-test.sln

            - name: run unit test
              uses: microsoft/vstest-action@v1.0.0
              with:
                testAssembly: |
                    **\Debug\UnitTest.dll
                    !**\obj\**
